# Настройка начальных продуктов для пользователей

## Обзор

Эта система автоматически создает начальные продукты для новых пользователей, чтобы помочь им освоиться с приложением. Пользователи получают набор из 10 популярных продуктов с реалистичными сроками годности.

## Файлы

### SQL функции

- `supabase/create_initial_products.sql` - Основные функции для создания начальных продуктов
- `supabase/manual_initial_products.sql` - Функции для ручного создания продуктов

### UI компоненты

- `src/components/InitialProductsSetup.tsx` - Компонент для предложения пользователю создать начальные продукты

## Настройка

### 1. Выполните SQL скрипты в Supabase

```sql
-- Сначала выполните основной скрипт
\i supabase/create_initial_products.sql

-- Затем выполните скрипт для ручного управления
\i supabase/manual_initial_products.sql
```

### 2. Убедитесь, что каталог продуктов заполнен

```sql
-- Выполните скрипт заполнения каталога
\i supabase/supabase_catalog_seed_localized.sql
```

## Как это работает

### Автоматическое создание

- При регистрации нового пользователя автоматически создается триггер
- Триггер создает морозильник, полку и 10 начальных продуктов
- Продукты берутся из общего каталога с реалистичными сроками годности

### Ручное создание

- Пользователь может нажать кнопку "Добавить примеры продуктов" на странице списка продуктов
- Это полезно для существующих пользователей, у которых нет продуктов

### Начальные продукты

Система добавляет следующие продукты:

- Milk (7 дней)
- Bread (7 дней)
- Eggs (7 дней)
- Chicken Breast (3 дня)
- Apples (5 дней)
- Bananas (5 дней)
- Cheese (3 дня)
- Butter (7 дней)
- Rice (365 дней)
- Pasta (365 дней)

## Управление

### Создать продукты для всех пользователей без продуктов

```sql
SELECT create_initial_products_for_all_users();
```

### Создать продукты для конкретного пользователя

```sql
SELECT create_initial_products_manual('user-uuid-here');
```

### Проверить, есть ли у пользователя продукты

```sql
SELECT user_has_products('user-uuid-here');
```

## Безопасность

- Все функции проверяют права доступа
- Пользователи могут создавать продукты только для себя
- Триггеры работают только для новых пользователей
- RLS политики защищают данные пользователей

## Локализация

Компонент поддерживает 3 языка:

- Английский (en)
- Русский (ru)
- Итальянский (it)

Переводы находятся в файлах `src/i18n/locales/*/translation.json` в секции `initialProducts`.
